\hypertarget{uart_8c}{}\section{src/uart.c File Reference}
\label{uart_8c}\index{src/uart.\+c@{src/uart.\+c}}


Implementation for uart library.  


{\ttfamily \#include $<$avr/io.\+h$>$}\newline
{\ttfamily \#include $<$avr/interrupt.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$util/delay.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include \char`\"{}../inc/uart.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../inc/mcp2515.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../inc/can.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../inc/funkyboard.\+h\char`\"{}}\newline
Include dependency graph for uart.\+c\+:
% FIG 0
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{uart_8c_a43bafb28b29491ec7f871319b5a3b2f8}\label{uart_8c_a43bafb28b29491ec7f871319b5a3b2f8}} 
\#define {\bfseries F\+\_\+\+C\+PU}~4915200
\item 
\mbox{\Hypertarget{uart_8c_a62634036639f88eece6fbf226b45f84b}\label{uart_8c_a62634036639f88eece6fbf226b45f84b}} 
\#define {\bfseries B\+A\+UD}~9600
\item 
\mbox{\Hypertarget{uart_8c_a711e9130c825a7269c8c87dbb57a85e0}\label{uart_8c_a711e9130c825a7269c8c87dbb57a85e0}} 
\#define {\bfseries M\+Y\+U\+B\+RR}~F\+\_\+\+C\+PU/16/B\+A\+UD-\/1
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{uart_8c_a9622edb266a65452131cdbbccb5e5b0e}{I\+SR} (U\+S\+A\+R\+T0\+\_\+\+R\+X\+C\+\_\+vect)
\begin{DoxyCompactList}\small\item\em Interrupt service routine when data received over uart. \end{DoxyCompactList}\item 
void \hyperlink{uart_8c_aa18a082d6fdf943df86482169ffc3f87}{U\+A\+R\+T\+\_\+execute\+\_\+cmd} ()
\begin{DoxyCompactList}\small\item\em Execute command type specified by cmd\+\_\+buffer\mbox{[}0\mbox{]}. \end{DoxyCompactList}\item 
void \hyperlink{uart_8c_a1e6251d42b9ed9f5a1c7a7c9141e944d}{U\+A\+R\+T\+\_\+execute\+\_\+basic\+\_\+cmd} ()
\begin{DoxyCompactList}\small\item\em Execute the basic command specified by cmd\+\_\+buffer\mbox{[}1\mbox{]}. \end{DoxyCompactList}\item 
void \hyperlink{uart_8c_a2124463c7e9b3ef7821408e335a9f5d1}{U\+A\+R\+T\+\_\+execute\+\_\+mcp2515\+\_\+cmd} ()
\begin{DoxyCompactList}\small\item\em Execute the mcp2515 command specified by cmd\+\_\+buffer\mbox{[}1\mbox{]}. \end{DoxyCompactList}\item 
void \hyperlink{uart_8c_ab21055edd9b1212e67721dbf249f39a4}{U\+A\+R\+T\+\_\+execute\+\_\+can\+\_\+cmd} ()
\begin{DoxyCompactList}\small\item\em Execute the can command specified by cmd\+\_\+buffer\mbox{[}1\mbox{]}. \end{DoxyCompactList}\item 
void \hyperlink{uart_8c_a4871894308632c9c45b93ea8d400d5fa}{U\+A\+R\+T\+\_\+execute\+\_\+sram\+\_\+cmd} ()
\begin{DoxyCompactList}\small\item\em Execute the sram command specified by cmd\+\_\+buffer\mbox{[}1\mbox{]}. \end{DoxyCompactList}\item 
void \hyperlink{uart_8c_a7c8a9916d47317775f7c5df93ad39634}{U\+A\+R\+T\+\_\+execute\+\_\+motor\+\_\+cmd} ()
\begin{DoxyCompactList}\small\item\em Execute the motor command specified by cmd\+\_\+buffer\mbox{[}1\mbox{]}. \end{DoxyCompactList}\item 
void \hyperlink{uart_8c_a01f5996cfbcef121abc486e732b208c7}{uart\+\_\+init} ()
\begin{DoxyCompactList}\small\item\em Initialize baudrate and dataformat. Enable Rx, Tx and interrupt on uart. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{uart_8c_ad6e60ebdedd5917c28e27ece1999fac7}{U\+A\+R\+T\+\_\+rx\+\_\+polling} ()
\begin{DoxyCompactList}\small\item\em Read data from uart. \end{DoxyCompactList}\item 
void \hyperlink{uart_8c_a355551c5b3fc5d33227f1dd2bed1d9f6}{U\+A\+R\+T\+\_\+tx\+\_\+polling} (uint8\+\_\+t data)
\begin{DoxyCompactList}\small\item\em Send data with uart. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Implementation for uart library. 



\subsection{Function Documentation}
\mbox{\Hypertarget{uart_8c_a9622edb266a65452131cdbbccb5e5b0e}\label{uart_8c_a9622edb266a65452131cdbbccb5e5b0e}} 
\index{uart.\+c@{uart.\+c}!I\+SR@{I\+SR}}
\index{I\+SR@{I\+SR}!uart.\+c@{uart.\+c}}
\subsubsection{\texorpdfstring{I\+S\+R()}{ISR()}}
{\footnotesize\ttfamily I\+SR (\begin{DoxyParamCaption}\item[{U\+S\+A\+R\+T0\+\_\+\+R\+X\+C\+\_\+vect}]{ }\end{DoxyParamCaption})}



Interrupt service routine when data received over uart. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 24 of file uart.\+c.

\mbox{\Hypertarget{uart_8c_a1e6251d42b9ed9f5a1c7a7c9141e944d}\label{uart_8c_a1e6251d42b9ed9f5a1c7a7c9141e944d}} 
\index{uart.\+c@{uart.\+c}!U\+A\+R\+T\+\_\+execute\+\_\+basic\+\_\+cmd@{U\+A\+R\+T\+\_\+execute\+\_\+basic\+\_\+cmd}}
\index{U\+A\+R\+T\+\_\+execute\+\_\+basic\+\_\+cmd@{U\+A\+R\+T\+\_\+execute\+\_\+basic\+\_\+cmd}!uart.\+c@{uart.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+execute\+\_\+basic\+\_\+cmd()}{UART\_execute\_basic\_cmd()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+execute\+\_\+basic\+\_\+cmd (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Execute the basic command specified by cmd\+\_\+buffer\mbox{[}1\mbox{]}. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 53 of file uart.\+c.

\mbox{\Hypertarget{uart_8c_ab21055edd9b1212e67721dbf249f39a4}\label{uart_8c_ab21055edd9b1212e67721dbf249f39a4}} 
\index{uart.\+c@{uart.\+c}!U\+A\+R\+T\+\_\+execute\+\_\+can\+\_\+cmd@{U\+A\+R\+T\+\_\+execute\+\_\+can\+\_\+cmd}}
\index{U\+A\+R\+T\+\_\+execute\+\_\+can\+\_\+cmd@{U\+A\+R\+T\+\_\+execute\+\_\+can\+\_\+cmd}!uart.\+c@{uart.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+execute\+\_\+can\+\_\+cmd()}{UART\_execute\_can\_cmd()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+execute\+\_\+can\+\_\+cmd (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Execute the can command specified by cmd\+\_\+buffer\mbox{[}1\mbox{]}. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 179 of file uart.\+c.

\mbox{\Hypertarget{uart_8c_aa18a082d6fdf943df86482169ffc3f87}\label{uart_8c_aa18a082d6fdf943df86482169ffc3f87}} 
\index{uart.\+c@{uart.\+c}!U\+A\+R\+T\+\_\+execute\+\_\+cmd@{U\+A\+R\+T\+\_\+execute\+\_\+cmd}}
\index{U\+A\+R\+T\+\_\+execute\+\_\+cmd@{U\+A\+R\+T\+\_\+execute\+\_\+cmd}!uart.\+c@{uart.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+execute\+\_\+cmd()}{UART\_execute\_cmd()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+execute\+\_\+cmd (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Execute command type specified by cmd\+\_\+buffer\mbox{[}0\mbox{]}. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 34 of file uart.\+c.

\mbox{\Hypertarget{uart_8c_a2124463c7e9b3ef7821408e335a9f5d1}\label{uart_8c_a2124463c7e9b3ef7821408e335a9f5d1}} 
\index{uart.\+c@{uart.\+c}!U\+A\+R\+T\+\_\+execute\+\_\+mcp2515\+\_\+cmd@{U\+A\+R\+T\+\_\+execute\+\_\+mcp2515\+\_\+cmd}}
\index{U\+A\+R\+T\+\_\+execute\+\_\+mcp2515\+\_\+cmd@{U\+A\+R\+T\+\_\+execute\+\_\+mcp2515\+\_\+cmd}!uart.\+c@{uart.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+execute\+\_\+mcp2515\+\_\+cmd()}{UART\_execute\_mcp2515\_cmd()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+execute\+\_\+mcp2515\+\_\+cmd (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Execute the mcp2515 command specified by cmd\+\_\+buffer\mbox{[}1\mbox{]}. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 80 of file uart.\+c.

\mbox{\Hypertarget{uart_8c_a7c8a9916d47317775f7c5df93ad39634}\label{uart_8c_a7c8a9916d47317775f7c5df93ad39634}} 
\index{uart.\+c@{uart.\+c}!U\+A\+R\+T\+\_\+execute\+\_\+motor\+\_\+cmd@{U\+A\+R\+T\+\_\+execute\+\_\+motor\+\_\+cmd}}
\index{U\+A\+R\+T\+\_\+execute\+\_\+motor\+\_\+cmd@{U\+A\+R\+T\+\_\+execute\+\_\+motor\+\_\+cmd}!uart.\+c@{uart.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+execute\+\_\+motor\+\_\+cmd()}{UART\_execute\_motor\_cmd()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+execute\+\_\+motor\+\_\+cmd (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Execute the motor command specified by cmd\+\_\+buffer\mbox{[}1\mbox{]}. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 270 of file uart.\+c.

\mbox{\Hypertarget{uart_8c_a4871894308632c9c45b93ea8d400d5fa}\label{uart_8c_a4871894308632c9c45b93ea8d400d5fa}} 
\index{uart.\+c@{uart.\+c}!U\+A\+R\+T\+\_\+execute\+\_\+sram\+\_\+cmd@{U\+A\+R\+T\+\_\+execute\+\_\+sram\+\_\+cmd}}
\index{U\+A\+R\+T\+\_\+execute\+\_\+sram\+\_\+cmd@{U\+A\+R\+T\+\_\+execute\+\_\+sram\+\_\+cmd}!uart.\+c@{uart.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+execute\+\_\+sram\+\_\+cmd()}{UART\_execute\_sram\_cmd()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+execute\+\_\+sram\+\_\+cmd (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Execute the sram command specified by cmd\+\_\+buffer\mbox{[}1\mbox{]}. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 243 of file uart.\+c.

\mbox{\Hypertarget{uart_8c_a01f5996cfbcef121abc486e732b208c7}\label{uart_8c_a01f5996cfbcef121abc486e732b208c7}} 
\index{uart.\+c@{uart.\+c}!uart\+\_\+init@{uart\+\_\+init}}
\index{uart\+\_\+init@{uart\+\_\+init}!uart.\+c@{uart.\+c}}
\subsubsection{\texorpdfstring{uart\+\_\+init()}{uart\_init()}}
{\footnotesize\ttfamily void uart\+\_\+init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Initialize baudrate and dataformat. Enable Rx, Tx and interrupt on uart. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 281 of file uart.\+c.

\mbox{\Hypertarget{uart_8c_ad6e60ebdedd5917c28e27ece1999fac7}\label{uart_8c_ad6e60ebdedd5917c28e27ece1999fac7}} 
\index{uart.\+c@{uart.\+c}!U\+A\+R\+T\+\_\+rx\+\_\+polling@{U\+A\+R\+T\+\_\+rx\+\_\+polling}}
\index{U\+A\+R\+T\+\_\+rx\+\_\+polling@{U\+A\+R\+T\+\_\+rx\+\_\+polling}!uart.\+c@{uart.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+rx\+\_\+polling()}{UART\_rx\_polling()}}
{\footnotesize\ttfamily uint8\+\_\+t U\+A\+R\+T\+\_\+rx\+\_\+polling (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Read data from uart. 

\begin{DoxyReturn}{Returns}
uint8\+\_\+t \hyperlink{unionData}{Data} received 
\end{DoxyReturn}


Definition at line 298 of file uart.\+c.

\mbox{\Hypertarget{uart_8c_a355551c5b3fc5d33227f1dd2bed1d9f6}\label{uart_8c_a355551c5b3fc5d33227f1dd2bed1d9f6}} 
\index{uart.\+c@{uart.\+c}!U\+A\+R\+T\+\_\+tx\+\_\+polling@{U\+A\+R\+T\+\_\+tx\+\_\+polling}}
\index{U\+A\+R\+T\+\_\+tx\+\_\+polling@{U\+A\+R\+T\+\_\+tx\+\_\+polling}!uart.\+c@{uart.\+c}}
\subsubsection{\texorpdfstring{U\+A\+R\+T\+\_\+tx\+\_\+polling()}{UART\_tx\_polling()}}
{\footnotesize\ttfamily void U\+A\+R\+T\+\_\+tx\+\_\+polling (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{data }\end{DoxyParamCaption})}



Send data with uart. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em data} & \hyperlink{unionData}{Data} to be sent over uart\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 307 of file uart.\+c.

